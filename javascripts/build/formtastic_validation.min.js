function initialize(){var f=selectInputElements();var d,e,a;for(var c=0;c<f.length;c++){d=f[c].getAttribute("validation");if(d!=null){e=d.split(" ");for(var b=0;b<e.length;b++){a=getValidationAttributes(f[c]);bindInputElements(f[c],e[b],a)}}}}function selectInputElements(){var d=document.getElementsByTagName("input");var e=new Array;for(var b=0;b<d.length;b++){var a=d[b];var c=a.getAttribute("type");if(isValidInputType(c)){e.push(d[b])}}return e}function isValidInputType(a){switch(a){case"text":case"password":case"radio":case"checkbox":return true;default:return false}}function getValidationAttributes(e){var b={};var f=e.attributes;var d,a;for(var c=0;c<f.length;c++){d=extractValidationKey(f[c].name);a=f[c].value;if(d!=null){b[d]=a}}return b}function extractValidationKey(b){var c=/validation_(\w+)/;var a=b.match(c);return a!=null?a[1]:null}function extractFormatRegex(b){var c=/^\/(.*)\/$/;var a=b.match(c);return a!=null?a[1]:null}function confirmationID(b){var a=b.getAttribute("id");return a+"_confirmation"}function bindInputElements(c,a,b){var e=new LiveValidation(c);var f,d;switch(a){case"validates_acceptance_of":e.add(Validate.Acceptance,{failureMessage:b.message});break;case"validates_confirmation_of":d=new LiveValidation(confirmationID(c));d.add(Validate.Confirmation,{match:c,failureMessage:b.message});break;case"validates_exclusion_of":e.add(Validate.Exclusion,{within:JSON.parse(b["in"]),allowNull:b.allow_nil,failureMessage:b.message});break;case"validates_format_of":f=extractFormatRegex(b["with"]);e.add(Validate.Format,{pattern:new RegExp(f),failureMessage:b.message});break;case"validates_inclusion_of":e.add(Validate.Inclusion,{within:JSON.parse(b["in"]),allowNull:b.allow_nil,failureMessage:b.message});break;case"validates_size_of":case"validates_length_of":e.add(Validate.Length,{is:b.is,minimum:b.minimum,maximum:b.maximum,wrongLengthMessage:b.wrong_length,tooShortMessage:b.too_short,tooLongMessage:b.too_long});break;case"validates_numericality_of":e.add(Validate.Numericality,{is:b.equal_to,minimum:b.greater_than_or_equal_to,maximum:b.less_than_or_equal_to,onlyinteger:b.only_integer,failureMessage:b.message});break;case"validates_presence_of":e.add(Validate.Presence,{failureMessage:b.message});break}};